<!DOCTYPE html>
<html lang="fr">

  {% load static %}

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>CAD</title>

  <!-- Bootstrap core CSS -->
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet">
  <link href="{% static 'vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="{% static 'css/resume.min.css' %}" rel="stylesheet">

  <!--
  <script src="{% static 'js/P5/p5.min.js'              %}"></script>
  <script src="{% static 'js/P5/addons/p5.dom.min.js'   %}"></script>
  <script src="{% static 'js/P5/addons/p5.sound.min.js' %}"></script>
  -->
</head>

<body id="page-top">

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
    <a class="navbar-brand js-scroll-trigger" href="#page-top">
      <span class="d-block d-lg-none">Cours à domicile</span>
      <span class="d-none d-lg-block">
        <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="{% static 'img/profile.jpg' %}" alt="" />
      </span>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a href="/" class="nav-link">Accueil</a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="container-fluid">

    <section class="p-3 p-lg-5 align-items-center">
      <div id="container">

        <h3>Etudiants en attente</h3>

        <ul class="list-group">
          {% for request in student_requests %}
            <li class="list-group-item">
              <h4>{{ request.student.first_name }} {{ request.student.last_name }}</h4>
              <p>Cherche des cours de :</p>
              <ul>
                {% if request.student.profile.Maths_course %}
                <li>Maths</li>
                {% endif %}

                {% if request.student.profile.Chimie_course %}
                <li>Chimie</li>
                {% endif %}

                {% if request.student.profile.Physique_course %}
                <li>Physique</li>
                {% endif %}

                {% if request.student.profile.Francais_course %}
                <li>Francais</li>
                {% endif %}
              </ul>

              <hr>

              <p>Coaches ayant accepté :</p>

              <div class="row">
                {% for coach in request.coaches.all %}
                  <div class="card col-md-2" style="width: 18rem;margin: 2px;">
                    <div class="card-body">
                      <h4 class="card-title text-center">{{ coach.user.first_name }} {{ coach.user.last_name }}</h4>
                      <p class="card-text">Enseigne :
                        {% if coach.Maths_course %}
                          Maths
                          {% endif %}
                          {% if coach.Chimie_course %}
                          Chimie
                          {% endif %}
                          {% if coach.Physique_course %}
                          Physique
                          {% endif %}
                          {% if coach.Francais_course %}
                          Francais
                          {% endif %}
                        </p>

                        <!-- Modal -->
                        <div class="modal fade" id="{{ coach.user.username }}Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">{{ coach.user.first_name }} {{ coach.user.last_name }}</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body">
                                <div class="form-row">
                                  <div class="form-group row col-md-12">
                                    <p> - Ecole du coach : {{ coach.school }}</p>
                                  </div>
                                  <div class="form-group row col-md-12">
                                    <p> - Email : {{ coach.user.email }}</p>
                                  </div>
                                  <div class="form-group row col-md-12">
                                    <p> - Nombre d'étudiants actuel : {{ coach.nbStudents }}</p>
                                  </div>
                                </div>
                              </div>
                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="card-footer row">
                          <div class="col-md-6">
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#{{ coach.user.username }}Modal">
                              Détails
                            </button>
                          </div>
                          <div class="col-md-6">
                            <button type="button" class="btn btn-success" onclick="" name="accept">Choisir</button>
                          </div>
                        </div>

                      </div>
                    </div>
                  {% endfor %}
                </div>
            </li>
          {% endfor %}
        </ul>

      </div>
    </section>
    <script>
      var currentUser = "{{ user.username }}";
    </script>
  </div>

  <!-- Bootstrap core JavaScript -->
  <script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

  <!-- Plugin JavaScript -->
  <script src="{% static 'vendor/jquery-easing/jquery.easing.min.js' %}"></script>

  <script src="{% static 'js/resume.min.js' %}"></script>
  <script src="{% static 'js/schedule.js' %}"></script>
  <script>
    var id = createSched("{{ user.username }}");
    scheds[id].setSchedule("{{ user.profile.wanted_schedule }}");
  </script>

</body>
</html>
